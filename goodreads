import requests
from bs4 import BeautifulSoup
from requests import get
import re
import csv
headers = {'User-Agent': 'Mozilla/5.0'}
URL = 'https://www.goodreads.com/author/quotes/1455.Ernest_Hemingway'
response = requests.get(f'{URL}', headers=headers)
soup = BeautifulSoup(response.text, 'lxml')

x = int(1)
y = int(78)

def parse_page(number):
    print(f'Pracuje nad stroną numer {number}.')
    page = get(f'{URL}?page={number}')
    bs = BeautifulSoup(page.content, 'html.parser')
    lis = []
    for quotes in bs.find_all('div', class_='quote'):
        cytat= quotes.find('div', class_='quoteText').get_text().strip()
        cytat2= re.sub("  +", "", cytat.replace("\n", "")) #+ "\n"
        sign = int(re.search("―", cytat).start())

        lis.append(cytat2)
    print(lis)
    with open('quotes.csv', 'w', newline='', encoding="utf-8") as file:
            writer = csv.writer(file)
            writer.writerows(lis)
for page in range(x, y):
    parse_page(page)
